# UCAR TOPDOER Test Task

Этот репозиторий содержит API-сервис для учёта инцидентов.

## Описание

Маленький REST API для учёта инцидентов. Позволяет создавать инциденты, получать их список с фильтрацией по статусу и обновлять статус по id.  
Написано на Python с использованием FastAPI, PostgresSQL, SQLAlchemy.

## Быстрый старт

### 1. Клонирование

```bash
git clone https://github.com/DenisSedovEd/-UCAR-TOPDOER_test_task.git
```

### 2. Запуск приложения

```bash
docker compose up --build
```

Сервис будет доступен по адресу: http://localhost:8000

## Эндпоинты

## API эндпоинты для инцидентов

### Добавить тестовые (mock) данные
**GET** `/incidents/add_mock_data`

**Ответ:**  
Результат добавления тестовых данных (зависит от реализации метода).

---

### Удалить тестовые (mock) данные
**GET** `/incidents/delete_mock_data`

**Ответ:**  
Результат удаления тестовых данных (зависит от реализации метода).


---


### Получить список инцидентов
**GET** `/incidents/`

Параметры:
- `status_id` (необязательный, int) — фильтрация инцидентов по статусу.
- `skip` (int, по умолчанию 0) — количество пропускаемых записей (для пагинации).
- `limit` (int, по умолчанию 10, от 10 до 100) — максимальное количество возвращаемых записей.

**Ответ:**  
Список инцидентов в формате `IncidentResponse`.

---

### Создать инцидент
**POST** `/incidents`

**Тело запроса:**
- `incident_in` — объект инцидента в формате `IncidentCreate`.

**Ответ:**  
Созданный инцидент в формате `IncidentResponse`.

---

### Изменить статус инцидента
**PATCH** `/incidents/{incident_id}`

Параметры:
- `incident_id` (int, path) — ID инцидента.
- `status_id` (int, query) — Новый статус для инцидента.

**Ответ:**  
Обновлённый инцидент в формате `IncidentResponse`.

---

### Получить все статусы инцидентов
**GET** `/incidents/statuses`

**Ответ:**  
Список статусов инцидентов в формате `List[IncidentStatusSchema]`.

---



## Примечания

- Все запросы и ответы в формате JSON.
- Доступна автоматическая документация Swagger: http://127.0.0.1:8000/docs

## Контакты

Автор: DenisSedovEd